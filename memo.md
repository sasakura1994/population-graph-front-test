## 現状

入れたいと思っていたloadingの機能を入れた。

いくつか課題が残った。

loadingを入れるとhookのインターフェースが複雑になる。今まではv-modelで連想配列を操作するだけで良かったのだけれど、loadingを入れるとloadingかどうかは親依存になるので直接連想配列を子で指定するとちょっと不自然。

そういうわけでset関数を作ったけれど、get自体はcomputedにやりたいので今まで通り連想配列にしたけど、これだとv-modelに入れてもエラーが出てくれない。

stateを三値にすることがそもそも間違っていたのかも。loadingは別propsにすればよかったかも。

あと個人的に入れているvscodeのstorybook-openerプラグインが動いてくれなくなっていた。原因を調べた結果pnpmだと推移的依存(だっけ？)になっているパッケージをrequireしようとするとエラーになるのが原因だった(多分シンボリックリンクになっているせい)。

chatGPTに聞いてみたところ.npmrcの設定を変えればyarnやnpmみたいなパッケージの置き方に出来ると答えがあったのでその通りにした。


## この feature でやること

### 画面課題
- チェックボックスを true, loading, false の三値にする

### グラフ課題
- boundaryYear もわかるようにしたい。
  - このグラフは信頼性が薄い。
  - 途中から折れ線を Dash に返る方法があったのでそれを使ったりして表示したい。
- 選択した順序で legend が変わっちゃうのイヤ。
- 「人口数」じゃなくて選択してる種別でいいかも。

## メモ
prettier-tailwindのプラグイン入れても動かない。
- [ ] チェックボックスのcursor:pointer

## やれたら嬉しい
- [ ] チェックボックスをホバーしたらグラフ連動してほしい

## TODO タスク

- [x] API 学習テスト
- [x] グラフライブラリ学習テスト
- [x] リクエスト回数が１秒平均 5 回らしいのでそれに注意して実装を行う必要がある
- [ ] composition 取得中はボタンの切り替えを出来ないようにする
- [x] プロトタイプの作成
  - [x] 総人口を別の人口に切り替え
- [ ] playwright でグラフのアクセシビリティのテストを行う
- [ ] API_KEY を見せたくない
- [ ] API を叩くクラスのエラー処理
  - メモ：「セキュリティを考慮してコードを記述」しようとしたらサーバーサイドで RESAS API を叩くしかなくない？vite でやったことないし nuxt に乗り換えようかな……。それか BASIC 認証入れるかか。CORS に引っかからなければ誰でも叩ける API(ただし API_KEY は漏れない)を置いておくのとユーザー名とパスワードを入れない限り叩けない API(ただし API_KEY はパスを入れたら見える)のどっちがマシかって話な気がしたけど、両方入れるのが正解だよな。うーん。とりあえず保留。
